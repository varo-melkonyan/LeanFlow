{"ast":null,"code":"import React,{useEffect,useState}from'react';import Sidebar from'../components/Sidebar';import ChatBox from'../components/ChatBox';import TicketList from'../components/TicketList';import DarkModeToggle from'../components/DarkModeToggle';import LanguageSwitcher from'../components/LanguageSwitcher';import axios from'axios';import{useNavigate}from'react-router-dom';import{io}from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('https://leanflow.onrender.com');const Dashboard=_ref=>{let{role,setUser}=_ref;const[userName,setUserName]=useState('');const navigate=useNavigate();useEffect(()=>{const user=JSON.parse(localStorage.getItem('user'));if(!(user!==null&&user!==void 0&&user.email))return;if(user!==null&&user!==void 0&&user.name)setUserName(user.name);socket.emit('userOnline',user.email);socket.emit('registerUser',user.email);const handleForceLogout=()=>{alert('Your access role has been changed. You will be logged out.');localStorage.removeItem('user');navigate('/login');};socket.on('forceLogout',handleForceLogout);return()=>{socket.off('forceLogout',handleForceLogout);};},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white\",children:[/*#__PURE__*/_jsx(Sidebar,{role:role,setUser:setUser}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 p-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[\"Welcome, \",userName||role]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Here\\u2019s your dashboard overview.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(LanguageSwitcher,{}),/*#__PURE__*/_jsx(DarkModeToggle,{}),/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pravatar.cc/40\",alt:\"avatar\",className:\"w-8 h-8 rounded-full border\"})]})]}),role==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsx(Card,{title:\"Open\",count:3,color:\"blue\"}),/*#__PURE__*/_jsx(Card,{title:\"In Progress\",count:5,color:\"yellow\"}),/*#__PURE__*/_jsx(Card,{title:\"Closed\",count:12,color:\"green\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[(role==='admin'||role==='support')&&/*#__PURE__*/_jsx(ChatBox,{}),/*#__PURE__*/_jsx(TicketList,{role:role})]})]})]});};const Card=_ref2=>{let{title,count,color}=_ref2;const colorClasses={blue:'text-blue-600',yellow:'text-yellow-500',green:'text-green-500'};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold \".concat(colorClasses[color]),children:count})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","Sidebar","ChatBox","TicketList","DarkModeToggle","LanguageSwitcher","axios","useNavigate","io","jsx","_jsx","jsxs","_jsxs","socket","Dashboard","_ref","role","setUser","userName","setUserName","navigate","user","JSON","parse","localStorage","getItem","email","name","emit","handleForceLogout","alert","removeItem","on","off","className","children","src","alt","Card","title","count","color","_ref2","colorClasses","blue","yellow","green","concat"],"sources":["/Users/varazdat.melkonyan/Desktop/LeanFlow/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport ChatBox from '../components/ChatBox';\nimport TicketList from '../components/TicketList';\nimport DarkModeToggle from '../components/DarkModeToggle';\nimport LanguageSwitcher from '../components/LanguageSwitcher';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\n\nconst socket = io('https://leanflow.onrender.com');\n\nconst Dashboard = ({ role, setUser }) => {\n  const [userName, setUserName] = useState('');\n  const navigate = useNavigate();\n\n\nuseEffect(() => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (!user?.email) return;\n\n  if (user?.name) setUserName(user.name);\n\n  socket.emit('userOnline', user.email);\n  socket.emit('registerUser', user.email);\n\n  const handleForceLogout = () => {\n    alert('Your access role has been changed. You will be logged out.');\n    localStorage.removeItem('user');\n    navigate('/login');\n  };\n\n  socket.on('forceLogout', handleForceLogout);\n\n  return () => {\n    socket.off('forceLogout', handleForceLogout);\n  };\n}, [navigate]);\n\n\n\n  return (\n    <div className=\"flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white\">\n      <Sidebar role={role} setUser={setUser} />\n\n      <main className=\"flex-1 p-6 overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Welcome, {userName || role}</h1>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              Hereâ€™s your dashboard overview.\n            </p>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <LanguageSwitcher />\n            <DarkModeToggle />\n            <img\n              src=\"https://i.pravatar.cc/40\"\n              alt=\"avatar\"\n              className=\"w-8 h-8 rounded-full border\"\n            />\n          </div>\n        </div>\n\n        {/* Overview Cards */}\n        {role === 'admin' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n            <Card title=\"Open\" count={3} color=\"blue\" />\n            <Card title=\"In Progress\" count={5} color=\"yellow\" />\n            <Card title=\"Closed\" count={12} color=\"green\" />\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {(role === 'admin' || role === 'support') && <ChatBox />}\n          <TicketList role={role} />\n        </div>\n      </main>\n    </div>\n  );\n};\n\nconst Card = ({ title, count, color }) => {\n  const colorClasses = {\n    blue: 'text-blue-600',\n    yellow: 'text-yellow-500',\n    green: 'text-green-500',\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm\">\n      <p className=\"text-sm text-gray-500 dark:text-gray-400\">{title}</p>\n      <p className={`text-2xl font-bold ${colorClasses[color]}`}>{count}</p>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}