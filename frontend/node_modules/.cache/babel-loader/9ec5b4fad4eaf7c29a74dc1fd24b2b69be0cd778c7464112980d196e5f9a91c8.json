{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TicketList=_ref=>{let{role}=_ref;const[tickets,setTickets]=useState([]);const fetchTickets=async()=>{const res=await axios.get('https://leanflow.onrender.com/api/tickets');const user=JSON.parse(localStorage.getItem('user'));let filtered=res.data;if(role==='client'){filtered=res.data.filter(t=>{var _t$createdBy;return((_t$createdBy=t.createdBy)===null||_t$createdBy===void 0?void 0:_t$createdBy._id)===user.id;});}if(role==='support'){filtered=res.data.filter(t=>{var _t$assignedTo;return((_t$assignedTo=t.assignedTo)===null||_t$assignedTo===void 0?void 0:_t$assignedTo._id)===user.id;});}setTickets(filtered);};useEffect(()=>{fetchTickets();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-xl shadow h-[400px] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Tickets\"}),tickets.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"No tickets available.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3\",children:tickets.map(ticket=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-3 border rounded bg-gray-50 dark:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:ticket.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:ticket.status})]},ticket._id))})]});};export default TicketList;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","TicketList","_ref","role","tickets","setTickets","fetchTickets","res","get","user","JSON","parse","localStorage","getItem","filtered","data","filter","t","_t$createdBy","createdBy","_id","id","_t$assignedTo","assignedTo","className","children","length","map","ticket","title","status"],"sources":["/Users/varazdat.melkonyan/Desktop/LeanFlow/frontend/src/components/TicketList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst TicketList = ({ role }) => {\n  const [tickets, setTickets] = useState([]);\n\n  const fetchTickets = async () => {\n    const res = await axios.get('https://leanflow.onrender.com/api/tickets');\n    const user = JSON.parse(localStorage.getItem('user'));\n\n    let filtered = res.data;\n\n    if (role === 'client') {\n      filtered = res.data.filter(t => t.createdBy?._id === user.id);\n    }\n\n    if (role === 'support') {\n      filtered = res.data.filter(t => t.assignedTo?._id === user.id);\n    }\n\n    setTickets(filtered);\n  };\n\n  useEffect(() => {\n    fetchTickets();\n  }, []);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-4 rounded-xl shadow h-[400px] overflow-y-auto\">\n      <h2 className=\"text-lg font-semibold mb-4\">Tickets</h2>\n\n      {tickets.length === 0 ? (\n        <p className=\"text-sm text-gray-500 dark:text-gray-400\">No tickets available.</p>\n      ) : (\n        <ul className=\"space-y-3\">\n          {tickets.map((ticket) => (\n            <li key={ticket._id} className=\"p-3 border rounded bg-gray-50 dark:bg-gray-700\">\n              <p className=\"font-semibold\">{ticket.title}</p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-300\">{ticket.status}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default TicketList;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC1B,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAE1C,KAAM,CAAAW,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,CAAC,2CAA2C,CAAC,CACxE,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAErD,GAAI,CAAAC,QAAQ,CAAGP,GAAG,CAACQ,IAAI,CAEvB,GAAIZ,IAAI,GAAK,QAAQ,CAAE,CACrBW,QAAQ,CAAGP,GAAG,CAACQ,IAAI,CAACC,MAAM,CAACC,CAAC,OAAAC,YAAA,OAAI,EAAAA,YAAA,CAAAD,CAAC,CAACE,SAAS,UAAAD,YAAA,iBAAXA,YAAA,CAAaE,GAAG,IAAKX,IAAI,CAACY,EAAE,GAAC,CAC/D,CAEA,GAAIlB,IAAI,GAAK,SAAS,CAAE,CACtBW,QAAQ,CAAGP,GAAG,CAACQ,IAAI,CAACC,MAAM,CAACC,CAAC,OAAAK,aAAA,OAAI,EAAAA,aAAA,CAAAL,CAAC,CAACM,UAAU,UAAAD,aAAA,iBAAZA,aAAA,CAAcF,GAAG,IAAKX,IAAI,CAACY,EAAE,GAAC,CAChE,CAEAhB,UAAU,CAACS,QAAQ,CAAC,CACtB,CAAC,CAEDpB,SAAS,CAAC,IAAM,CACdY,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEN,KAAA,QAAKwB,SAAS,CAAC,2EAA2E,CAAAC,QAAA,eACxF3B,IAAA,OAAI0B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,CAEtDrB,OAAO,CAACsB,MAAM,GAAK,CAAC,cACnB5B,IAAA,MAAG0B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,cAEjF3B,IAAA,OAAI0B,SAAS,CAAC,WAAW,CAAAC,QAAA,CACtBrB,OAAO,CAACuB,GAAG,CAAEC,MAAM,eAClB5B,KAAA,OAAqBwB,SAAS,CAAC,gDAAgD,CAAAC,QAAA,eAC7E3B,IAAA,MAAG0B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEG,MAAM,CAACC,KAAK,CAAI,CAAC,cAC/C/B,IAAA,MAAG0B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAEG,MAAM,CAACE,MAAM,CAAI,CAAC,GAFpEF,MAAM,CAACR,GAGZ,CACL,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}